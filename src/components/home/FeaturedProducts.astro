---
import { Database } from '@/lib/db';
import Subtitle from '@/components/shared/Subtitle.astro';
import ProductsCard from '@/components/home/ProductsCard.astro';
import SecondaryButton from '@/components/shared/SecondaryButton';

const { featuredProducts } = Astro.props;

const products = await Database.getAllProducts({ featured: true });
---

<section class='container relative px-4 py-16 md:px-20 md:py-24 lg:py-32'>
  <div class='flex flex-col items-center gap-12 lg:gap-16'>
    <div class='text-center w-full'>
      <Subtitle subtitle={featuredProducts.title} />
      {
        featuredProducts.text && (
          <div class='text-lg leading-relaxed text-muted-foreground md:text-xl mt-8 w-full'>
            <p class='text-center'>{featuredProducts.text}</p>
          </div>
        )
      }

      <div class='flex flex-wrap justify-center gap-16 pt-24'>
        {
          products.map((product) => (
            <div class='img-appear group border border-orange-50/10 rounded-sm relative w-72 shadow-xl transition-all duration-300 hover:drop-shadow-3xl hover:shadow-orange-200/10'>
              <ProductsCard product={product} />
            </div>
          ))
        }
      </div>

      <div class='mt-20 text-center'>
        <SecondaryButton
          label={featuredProducts.buttonText || 'Ver Productos'}
          href={featuredProducts.buttonLink || '/categoria/productos'}
          className='px-8 py-6 text-lg font-semibold text-white min-w-40'
        />
      </div>
    </div>
  </div>
</section>
